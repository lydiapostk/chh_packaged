(() => {
var exports = {};
exports.id = 205;
exports.ids = [205];
exports.modules = {

/***/ 252:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/cookie");

/***/ }),

/***/ 7999:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/path-to-regexp");

/***/ }),

/***/ 8038:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react");

/***/ }),

/***/ 8704:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react-dom/server-rendering-stub");

/***/ }),

/***/ 7897:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react-server-dom-webpack/client");

/***/ }),

/***/ 6786:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react/jsx-runtime");

/***/ }),

/***/ 1090:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/get-segment-param.js");

/***/ }),

/***/ 8652:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/future/helpers/interception-routes.js");

/***/ }),

/***/ 3918:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/amp-context.js");

/***/ }),

/***/ 5732:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/amp-mode.js");

/***/ }),

/***/ 3280:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/app-router-context.js");

/***/ }),

/***/ 7244:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/hash.js");

/***/ }),

/***/ 2796:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/head-manager-context.js");

/***/ }),

/***/ 9274:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/hooks-client-context.js");

/***/ }),

/***/ 4486:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/image-blur-svg.js");

/***/ }),

/***/ 744:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/image-config-context.js");

/***/ }),

/***/ 5843:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/image-config.js");

/***/ }),

/***/ 9552:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/image-loader");

/***/ }),

/***/ 1751:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/add-path-prefix.js");

/***/ }),

/***/ 1668:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/handle-smooth-scroll.js");

/***/ }),

/***/ 1897:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/is-bot.js");

/***/ }),

/***/ 8854:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/parse-path.js");

/***/ }),

/***/ 3297:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/remove-trailing-slash.js");

/***/ }),

/***/ 3349:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/server-inserted-html.js");

/***/ }),

/***/ 2470:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/side-effect.js");

/***/ }),

/***/ 618:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/utils/warn-once.js");

/***/ }),

/***/ 7147:
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ 1017:
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ 2781:
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ 7310:
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ 9186:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AppRouter: () => (/* reexport default from dynamic */ next_dist_client_components_app_router__WEBPACK_IMPORTED_MODULE_0___default.a),
/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_3___default.a),
/* harmony export */   LayoutRouter: () => (/* reexport default from dynamic */ next_dist_client_components_layout_router__WEBPACK_IMPORTED_MODULE_1___default.a),
/* harmony export */   RenderFromTemplateContext: () => (/* reexport default from dynamic */ next_dist_client_components_render_from_template_context__WEBPACK_IMPORTED_MODULE_2___default.a),
/* harmony export */   StaticGenerationSearchParamsBailoutProvider: () => (/* reexport default from dynamic */ next_dist_client_components_static_generation_searchparams_bailout_provider__WEBPACK_IMPORTED_MODULE_8___default.a),
/* harmony export */   __next_app_webpack_require__: () => (/* binding */ __next_app_webpack_require__),
/* harmony export */   actionAsyncStorage: () => (/* reexport safe */ next_dist_client_components_action_async_storage__WEBPACK_IMPORTED_MODULE_6__.actionAsyncStorage),
/* harmony export */   createSearchParamsBailoutProxy: () => (/* reexport safe */ next_dist_client_components_searchparams_bailout_proxy__WEBPACK_IMPORTED_MODULE_9__.createSearchParamsBailoutProxy),
/* harmony export */   decodeAction: () => (/* reexport safe */ react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_11__.decodeAction),
/* harmony export */   decodeReply: () => (/* reexport safe */ react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_11__.decodeReply),
/* harmony export */   originalPathname: () => (/* binding */ originalPathname),
/* harmony export */   pages: () => (/* binding */ pages),
/* harmony export */   preconnect: () => (/* reexport safe */ next_dist_server_app_render_rsc_preloads__WEBPACK_IMPORTED_MODULE_12__.preconnect),
/* harmony export */   preloadFont: () => (/* reexport safe */ next_dist_server_app_render_rsc_preloads__WEBPACK_IMPORTED_MODULE_12__.preloadFont),
/* harmony export */   preloadStyle: () => (/* reexport safe */ next_dist_server_app_render_rsc_preloads__WEBPACK_IMPORTED_MODULE_12__.preloadStyle),
/* harmony export */   renderToReadableStream: () => (/* reexport safe */ react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_11__.renderToReadableStream),
/* harmony export */   requestAsyncStorage: () => (/* reexport safe */ next_dist_client_components_request_async_storage__WEBPACK_IMPORTED_MODULE_5__.requestAsyncStorage),
/* harmony export */   serverHooks: () => (/* reexport module object */ next_dist_client_components_hooks_server_context__WEBPACK_IMPORTED_MODULE_10__),
/* harmony export */   staticGenerationAsyncStorage: () => (/* reexport safe */ next_dist_client_components_static_generation_async_storage__WEBPACK_IMPORTED_MODULE_4__.staticGenerationAsyncStorage),
/* harmony export */   staticGenerationBailout: () => (/* reexport safe */ next_dist_client_components_static_generation_bailout__WEBPACK_IMPORTED_MODULE_7__.staticGenerationBailout),
/* harmony export */   tree: () => (/* binding */ tree)
/* harmony export */ });
/* harmony import */ var next_dist_client_components_app_router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4592);
/* harmony import */ var next_dist_client_components_app_router__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_app_router__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_dist_client_components_layout_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6301);
/* harmony import */ var next_dist_client_components_layout_router__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_layout_router__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var next_dist_client_components_render_from_template_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(7431);
/* harmony import */ var next_dist_client_components_render_from_template_context__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_render_from_template_context__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2673);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var next_dist_client_components_static_generation_async_storage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(94);
/* harmony import */ var next_dist_client_components_static_generation_async_storage__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_static_generation_async_storage__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var next_dist_client_components_request_async_storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(4437);
/* harmony import */ var next_dist_client_components_request_async_storage__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_request_async_storage__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var next_dist_client_components_action_async_storage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(6127);
/* harmony import */ var next_dist_client_components_action_async_storage__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_action_async_storage__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var next_dist_client_components_static_generation_bailout__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(5486);
/* harmony import */ var next_dist_client_components_static_generation_bailout__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_static_generation_bailout__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var next_dist_client_components_static_generation_searchparams_bailout_provider__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(6404);
/* harmony import */ var next_dist_client_components_static_generation_searchparams_bailout_provider__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_static_generation_searchparams_bailout_provider__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var next_dist_client_components_searchparams_bailout_proxy__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2527);
/* harmony import */ var next_dist_client_components_searchparams_bailout_proxy__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_searchparams_bailout_proxy__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var next_dist_client_components_hooks_server_context__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(3332);
/* harmony import */ var next_dist_client_components_hooks_server_context__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_hooks_server_context__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(7902);
/* harmony import */ var next_dist_server_app_render_rsc_preloads__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(3099);
/* harmony import */ var next_dist_server_app_render_rsc_preloads__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_rsc_preloads__WEBPACK_IMPORTED_MODULE_12__);

    const tree = {
        children: [
        '',
        {
        children: [
        'allocations',
        {
        children: [
        'generate',
        {
        children: ['__PAGE__', {}, {
          page: [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 1864)), "C:\\Users\\Lydia\\Documents\\Optimisation\\chh\\CRSGUI - Generic\\frontend\\src\\app\\allocations\\generate\\page.tsx"],
          
        }]
      },
        {
          
          
        }
      ]
      },
        {
          'layout': [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 8492)), "C:\\Users\\Lydia\\Documents\\Optimisation\\chh\\CRSGUI - Generic\\frontend\\src\\app\\allocations\\layout.tsx"],
          metadata: {
    icon: [(async (props) => (await Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 2819))).default(props))],
    apple: [],
    openGraph: [],
    twitter: [],
    manifest: undefined
  }
        }
      ]
      },
        {
          'layout': [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 4232)), "C:\\Users\\Lydia\\Documents\\Optimisation\\chh\\CRSGUI - Generic\\frontend\\src\\app\\layout.tsx"],
          metadata: {
    icon: [(async (props) => (await Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 2819))).default(props))],
    apple: [],
    openGraph: [],
    twitter: [],
    manifest: undefined
  }
        }
      ]
      }.children;
    const pages = ["C:\\Users\\Lydia\\Documents\\Optimisation\\chh\\CRSGUI - Generic\\frontend\\src\\app\\allocations\\generate\\page.tsx"];

    
    
    
    

    

    
    

    
    
    

    

    
    const __next_app_webpack_require__ = __webpack_require__
    

    const originalPathname = "/allocations/generate/page"
  

/***/ }),

/***/ 4078:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 2683))

/***/ }),

/***/ 2683:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ ViewAllAllocations)
});

// EXTERNAL MODULE: external "next/dist/compiled/react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(6786);
// EXTERNAL MODULE: external "next/dist/compiled/react"
var react_ = __webpack_require__(8038);
;// CONCATENATED MODULE: ./src/data/month-year.tsx
const Months = [
    "Jan",
    "Feb",
    "Mar",
    "Apr",
    "May",
    "Jun",
    "Jul",
    "Aug",
    "Sep",
    "Oct",
    "Nov",
    "Dec"
];
function MonthToInt(month) {
    switch(month){
        case "Jan":
            return 1;
        case "Feb":
            return 2;
        case "Mar":
            return 3;
        case "Apr":
            return 4;
        case "May":
            return 5;
        case "Jun":
            return 6;
        case "Jul":
            return 7;
        case "Aug":
            return 8;
        case "Sep":
            return 9;
        case "Oct":
            return 10;
        case "Nov":
            return 11;
        case "Dec":
            return 12;
    }
}

// EXTERNAL MODULE: ./src/components/button/go-button.tsx
var go_button = __webpack_require__(1163);
// EXTERNAL MODULE: ./src/components/form/form-dropdown-input.tsx
var form_dropdown_input = __webpack_require__(9721);
// EXTERNAL MODULE: ./src/components/form/form-number-input.tsx
var form_number_input = __webpack_require__(4587);
// EXTERNAL MODULE: ./src/components/modal/card.modal.tsx + 1 modules
var card_modal = __webpack_require__(3257);
// EXTERNAL MODULE: ./src/components/form/form-input-field.tsx
var form_input_field = __webpack_require__(8975);
// EXTERNAL MODULE: ./src/components/form/form-multiselect-dropdown-input.tsx
var form_multiselect_dropdown_input = __webpack_require__(9531);
;// CONCATENATED MODULE: ./src/app/allocations/generate/card-one.tsx








function CardOne({ isCardSelected, goToNextCard, showSpinner, selectedMonth, setSelectedMonth, selectedYear, setSelectedYear, allCrsNames, leavingCrs, setLeavingCrs, noNewCaseCrs, setNoNewCaseCrs }) {
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(card_modal/* default */.Z, {
        isCardSelected: isCardSelected,
        showSpinner: showSpinner,
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "w-20 py-10 flex flex-row gap-2 justify-center",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx(form_dropdown_input/* default */.Z, {
                        options: Months,
                        selectedOption: selectedMonth,
                        setSelectedOption: setSelectedMonth
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx(form_number_input/* default */.Z, {
                        name: "Year",
                        numInput: selectedYear,
                        setNumInput: setSelectedYear
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "text-center py-2",
                children: /*#__PURE__*/ jsx_runtime_.jsx(form_input_field/* default */.Z, {
                    title: "Leaving CRS",
                    description: "Select those who are leaving this month.",
                    children: /*#__PURE__*/ jsx_runtime_.jsx(form_multiselect_dropdown_input/* default */.Z, {
                        options: allCrsNames,
                        selectedOptions: leavingCrs,
                        setSelectedOptions: setLeavingCrs
                    })
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "text-center py-2",
                children: /*#__PURE__*/ jsx_runtime_.jsx(form_input_field/* default */.Z, {
                    title: "No New Cases",
                    description: "Select CRS who are not taking new cases this month.",
                    children: /*#__PURE__*/ jsx_runtime_.jsx(form_multiselect_dropdown_input/* default */.Z, {
                        options: allCrsNames,
                        selectedOptions: noNewCaseCrs,
                        setSelectedOptions: setNoNewCaseCrs
                    })
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "w-20 py-10 flex flex-row gap-2 justify-center",
                children: /*#__PURE__*/ jsx_runtime_.jsx(go_button/* default */.Z, {
                    onClick: goToNextCard,
                    description: "Start"
                })
            })
        ]
    });
}

// EXTERNAL MODULE: ./node_modules/xlsx/xlsx.js
var xlsx = __webpack_require__(9067);
;// CONCATENATED MODULE: ./src/components/files/file-processing.tsx

const XLSX_EXTENSIONS = [
    "XLS",
    "xls",
    "XLSX",
    "xlsx",
    "xlsm",
    "xlsb"
];
const CSV_EXTENSIONS = [
    "CSV",
    "csv"
];
function readCsvOrXlsx({ fileType, file, checkFileData, renameHeaders, paddedCol, paddedRow, sheetName }) {
    if (file === undefined || file === null) {
        throw Error("Undefined file");
    }
    var headers;
    var data = [];
    switch(fileType){
        case "csv":
            // Convert to string, trim, and split by line break
            const input_array = file.toString().trim().split("\n");
            // Split rows by comma and push to data matrix
            for (var r of input_array){
                let row = r.toString().split(",");
                data.push(row);
            }
            // Get header row
            headers = data[0];
        case "xlsx":
            var workbook = xlsx.read(file, {
                type: "binary"
            });
            sheetName = typeof sheetName === "number" ? workbook.SheetNames[sheetName] : !sheetName || sheetName == "" ? workbook.SheetNames[0] // Assume take first sheet if undefined
             : sheetName;
            var worksheet = workbook.Sheets[sheetName];
            var processedArray = xlsx.utils.sheet_to_json(worksheet, {
                header: 1,
                raw: false
            });
            // Get header row
            headers = processedArray.shift();
            if (paddedRow) {
                for(var i = 0; i < paddedRow; i++){
                    headers = processedArray.shift();
                }
            }
            // Return if there is no valid sheet
            if (!headers) {
                throw Error("Headers cannot be found! Did you leave empty rows at the top?");
            }
            // Remove trailing whitespaces
            headers = headers.map((header)=>header.trim());
            data = processedArray;
    }
    checkFileData?.headersValidation(headers);
    // Iterate over data rows
    var indexed_output = [];
    var startCol = paddedCol ? paddedCol : 0;
    for(var i = 0; i < data.length; i++){
        var indexedRow = {};
        var rawRow = data[i];
        // Remove duplicated header rows
        if (rawRow.every((entry)=>headers.some((header)=>entry.includes(header)))) {
            continue;
        }
        // Iterate over headers as keys and assign to object
        for(var j = startCol; j < headers.length; j++){
            var header = headers[j];
            if (renameHeaders !== undefined) {
                var maybeHeader = renameHeaders(header);
                header = maybeHeader ? maybeHeader : header;
            }
            indexedRow[header] = rawRow[j] ? rawRow[j].trim() : rawRow[j];
        }
        indexed_output.push(indexedRow);
    }
    return indexed_output;
}

;// CONCATENATED MODULE: ./src/components/files/file-upload.tsx



function FileUpload({ fileName, setFileName, expectedSheetsProp, errorMessage, setErrorMessage }) {
    const [isDragging, setIsDragging] = (0,react_.useState)(false);
    const fileUploadError = errorMessage !== "";
    // Define the event handlers
    const handleDragOver = (event)=>{
        event.preventDefault();
        setIsDragging(true);
    };
    const handleDragLeave = (event)=>{
        event.preventDefault();
        setIsDragging(false);
    };
    const handleDrop = (event)=>{
        event.preventDefault();
        if (event.dataTransfer == undefined) {
            return;
        }
        setIsDragging(false);
        // Fetch the files
        uploadFile(Array.from(event.dataTransfer.files)[0]);
    };
    const handleOnFileUploadChange = (event)=>{
        if (event.target.files) {
            uploadFile(event.target.files[0]);
        }
        event.target.value = "";
    };
    function uploadFile(file) {
        setFileName("");
        if (file === undefined) {
            return;
        }
        var fileExtension = file.name.split(".").pop();
        if (CSV_EXTENSIONS.includes(fileExtension) || XLSX_EXTENSIONS.includes(fileExtension)) {
            setErrorMessage("");
            processFile(file, fileExtension);
        } else {
            setErrorMessage("Unexpected file type selected!");
        }
    }
    function processFile(file, fileExtension) {
        var fileType = CSV_EXTENSIONS.includes(fileExtension) ? "csv" : "xlsx";
        const filereader = new FileReader();
        switch(fileType){
            case "csv":
                // Read csv as text
                filereader.readAsText(file);
                break;
            case "xlsx":
                // Read xlsx as binary string
                filereader.readAsBinaryString(file);
        }
        filereader.onload = function(event) {
            const fileData = event.target?.result;
            Array.from(expectedSheetsProp).forEach((sheet)=>{
                var maybeHeadersValidation = sheet["headersValidation"];
                var checkFileData = maybeHeadersValidation ? {
                    headersValidation: maybeHeadersValidation,
                    setErrorMessage: setErrorMessage
                } : undefined;
                // Process file data
                try {
                    var maybeDataTable = readCsvOrXlsx({
                        fileType: fileType,
                        file: fileData,
                        checkFileData: checkFileData,
                        renameHeaders: sheet["renameHeaders"],
                        paddedCol: sheet["colPadding"],
                        paddedRow: sheet["rowPadding"],
                        sheetName: sheet["sheetName"]
                    });
                    sheet.setFileDataTable(maybeDataTable);
                    setFileName("Uploaded!");
                } catch (error) {
                    setErrorMessage(error.message);
                }
            });
        };
    }
    // Style colour for responsive UI
    const textColour = isDragging ? "text-gray-100" : fileUploadError ? "text-red-500 hover:text-red-700" : fileName == "" ? "text-amber-500 hover:text-gray-100" : "text-green-500 hover:text-green-700";
    const bgColour = isDragging ? "bg-amber-400" : fileUploadError ? "bg-red-100 hover:bg-red-200" : fileName == "" ? "bg-amber-100 hover:bg-amber-400" : "bg-green-100 hover:bg-green-200";
    const borderColour = fileUploadError ? "border-red-500" : fileName == "" ? "border-amber-500" : "border-green-500";
    return /*#__PURE__*/ jsx_runtime_.jsx("div", {
        className: `flex items-center justify-center w-full ${textColour}`,
        onDragOver: handleDragOver,
        onDragLeave: handleDragLeave,
        onDrop: handleDrop,
        children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("label", {
            className: `${bgColour} ${borderColour} transition duration-150 ease-in-out flex flex-col items-center justify-center w-full h-40 border-2 border-dashed rounded-lg cursor-pointer`,
            children: [
                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                    className: "flex flex-col items-center justify-center pt-5 pb-6",
                    children: [
                        /*#__PURE__*/ jsx_runtime_.jsx("svg", {
                            className: `w-8 h-8 mb-4`,
                            "aria-hidden": "true",
                            xmlns: "http://www.w3.org/2000/svg",
                            fill: "none",
                            viewBox: "0 0 20 16",
                            children: /*#__PURE__*/ jsx_runtime_.jsx("path", {
                                stroke: "currentColor",
                                strokeLinecap: "round",
                                strokeLinejoin: "round",
                                strokeWidth: "2",
                                d: "M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"
                            })
                        }),
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                            className: `mb-2 text-sm`,
                            children: [
                                /*#__PURE__*/ jsx_runtime_.jsx("span", {
                                    className: "font-semibold",
                                    children: "Click to upload"
                                }),
                                " or drag and drop"
                            ]
                        }),
                        /*#__PURE__*/ jsx_runtime_.jsx("p", {
                            className: "text-xs",
                            children: "CSV or XLSX"
                        }),
                        fileUploadError && /*#__PURE__*/ jsx_runtime_.jsx("p", {
                            className: "text-xs py-2",
                            children: errorMessage
                        })
                    ]
                }),
                fileName,
                /*#__PURE__*/ jsx_runtime_.jsx("input", {
                    id: "dropzone-file",
                    type: "file",
                    accept: ".csv, .xlsx, .xls",
                    className: "hidden",
                    onChange: handleOnFileUploadChange
                })
            ]
        })
    });
}

// EXTERNAL MODULE: ./src/utils/bistring-map.tsx
var bistring_map = __webpack_require__(7898);
;// CONCATENATED MODULE: ./src/app/allocations/generate/emplacement-data.tsx

const EmplacementListColumnNameToKey = new bistring_map/* BiStringMap */.c({
    "Date Updated": "date_updated",
    "Remarks": "remarks",
    "Prison No": "prison_no",
    "Name": "name",
    "NRIC": "nric",
    "Location": "location",
    "Emplacement Date": "start_date",
    "Cohort Number": "cohort_no",
    "CBP Scheme": "cbp_scheme",
    "CBP Location": "cbp_location",
    "CBP Duration": "cbp_duration",
    "Medical Fitness Status": "medical_status",
    "Sexual / Violent\nAlert Rating": "iph_status",
    "STRAT-G": "bin",
    "Offence Category": "offence_category",
    "Admission Date": "admission_date",
    "LDR / EDR / TDD": "end_date",
    "Age (Years)": "age",
    "Education Level": "education",
    "Spoken Language": "spoken_language",
    "MAS Cat.": "mas_cat",
    "Social Service Agency / Volunteer name": "volunteer",
    "Contact Details": "contact_details",
    "NOK Name": "nok_name",
    "Block No.": "nok_block",
    "Street Name": "nok_street_name",
    "Unit No.": "nok_unit_address",
    "Postal Code": "nok_postal_code",
    "Contact No.": "nok_contact_no"
});
const CrsDatabaseColumnNameToKey = new bistring_map/* BiStringMap */.c({
    "Case Type": "case_type",
    "LCM Case": "is_lcm_case",
    "CRS Name": "crs_name",
    "RO Name": "ro_name",
    "Remarks": "remarks",
    "IPH Rating": "iph_rating",
    "IPH reasons": "iph_reasons",
    "MAS Category": "mas_cat",
    "Prison No": "prison_no",
    "Name": "name",
    "NRIC": "nric",
    "CBP Scheme": "cbp_scheme",
    "Emplacement Date": "start_date",
    "TDD (for CBP)": "end_date",
    "EDR (for MAS)": "edr_mas",
    "Case Status": "case_status",
    "For Model": "for_model",
    "Cat": "cat",
    "HWH": "hwh_location",
    "CBP Duration": "cbp_duration",
    "MAS Duration": "mas_duration",
    "Bin": "bin",
    "DRC Timer": "drc_timer",
    "Current Age": "age",
    "Gender": "gender",
    "Spoken Language": "spoken_language",
    "Educational Level": "education",
    "Medical Records": "medical_status",
    "Incare CRS": "incare_crs",
    "Sexual": "sexual_alert",
    "Violent": "violent_alert",
    "NOK Name": "nok_name",
    "NOK Relationship": "nok_relationship",
    "NOK Blk Street Name": "nok_block_street_address",
    "NOK Level Unit": "nok_unit_address",
    "NOK Postal Code": "nok_postal_code",
    "NOK Contact": "nok_contact_no",
    "Inmate Street Name": "inmate_street_address",
    "Inmate Postal Code": "inmate_postal_code"
});
function checkEmplacementDataColumns(dataTableName) {
    var expectedHeaders = dataTableName === "CrsDatabase" ? CrsDatabaseColumnNameToKey.keys() : EmplacementListColumnNameToKey.keys();
    return function(headers) {
        for (let header of expectedHeaders){
            if (!headers.includes(header)) {
                throw Error(`Missing header: ${header}`);
            }
        }
        return true;
    };
}
const InterimSupsColumnNameToKey = new bistring_map/* BiStringMap */.c({
    "name": "Name",
    "gender": "Gender",
    "iph_rating": "IPH Rating",
    "cat": "Cat",
    "cbp_duration": "CBP Duration",
    "cbp_scheme": "CBP Scheme",
    "end_date": "End Date",
    "hwh_location": "HWH Location",
    "spoken_language": "Spoken Language"
});
const InterimCrsColumnNameToKey = new bistring_map/* BiStringMap */.c({
    "crs_name": "Name",
    "old_caseload": "Old Caseload",
    "is_leaving": "Is Leaving",
    "no_new_cases": "On Hiatus"
});
const SupsResultsColumnNameToKey = new bistring_map/* BiStringMap */.c({
    "name": "Name",
    "is_lcm_case": "Is LCM",
    "gender": "Gender",
    "iph_rating": "IPH Rating",
    "cat": "Cat",
    "cbp_duration": "CBP Duration",
    "cbp_scheme": "CBP Scheme",
    "end_date": "End Date",
    "hwh_location": "HWH Location",
    "spoken_language": "Spoken Language"
});
const CrsResultsColumnNameToKey = new bistring_map/* BiStringMap */.c({
    "crs_name": "Name",
    "old_caseload": "Old Caseload",
    "num_new_cases": "No. New Cases",
    "new_caseload": "New Caseload",
    "is_leaving": "Is Leaving",
    "no_new_cases": "On Hiatus"
});

;// CONCATENATED MODULE: ./src/app/allocations/generate/card-two.tsx





function CardTwo({ isCardSelected, goToNextCard, goToPreviousCard, showSpinner, setCrsDatabase, setEmplacementList }) {
    const [crsDatabaseFileName, setCrsDatabaseFileName] = (0,react_.useState)("");
    const [emplacementListFileName, setEmplacementListFileName] = (0,react_.useState)("");
    const [emplacementListError, setEmplacementListError] = (0,react_.useState)("");
    const [crsDatabaseError, setCrsDatabaseError] = (0,react_.useState)("");
    function handleGoToNextCard() {
        if (crsDatabaseFileName.length === 0) {
            setCrsDatabaseError("Please upload a file!");
        }
        if (emplacementListFileName.length === 0) {
            setEmplacementListError("Please upload a file!");
        }
        if (crsDatabaseFileName.length > 0 && emplacementListFileName.length > 0) {
            goToNextCard();
        }
    }
    const crsDatabaseFileProp = [
        {
            "setFileDataTable": setCrsDatabase,
            "renameHeaders": (header)=>{
                return CrsDatabaseColumnNameToKey.getValue(header);
            },
            "headersValidation": checkEmplacementDataColumns("CrsDatabase")
        }
    ];
    const emplacementFileProp = [
        {
            "setFileDataTable": setEmplacementList,
            "renameHeaders": (header)=>{
                return EmplacementListColumnNameToKey.getValue(header);
            },
            "headersValidation": checkEmplacementDataColumns("EmplacementList")
        }
    ];
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(card_modal/* default */.Z, {
        isCardSelected: isCardSelected,
        goToNextCard: handleGoToNextCard,
        goToPreviousCard: goToPreviousCard,
        title: "Upload Datasets",
        showSpinner: showSpinner,
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "block py-2",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("p", {
                        className: "inline-flex underline decoration-double font-mono text-lg",
                        children: "CRS Database"
                    }),
                    ": Used for calculating CRS caseload, and filtering cases belonging to leaving CRS."
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "w-5/6 lg:w-4/6",
                children: /*#__PURE__*/ jsx_runtime_.jsx(FileUpload, {
                    fileName: crsDatabaseFileName,
                    setFileName: setCrsDatabaseFileName,
                    expectedSheetsProp: crsDatabaseFileProp,
                    errorMessage: crsDatabaseError,
                    setErrorMessage: setCrsDatabaseError
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "block py-2",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("p", {
                        className: "inline-flex underline decoration-double font-mono text-lg",
                        children: "Emplacement Dataset"
                    }),
                    ": New CHH supervisees will be filtered from list of all newly emplaced supervisees."
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "w-5/6 lg:w-4/6",
                children: /*#__PURE__*/ jsx_runtime_.jsx(FileUpload, {
                    fileName: emplacementListFileName,
                    setFileName: setEmplacementListFileName,
                    expectedSheetsProp: emplacementFileProp,
                    errorMessage: emplacementListError,
                    setErrorMessage: setEmplacementListError
                })
            })
        ]
    });
}

// EXTERNAL MODULE: ./node_modules/@headlessui/react/dist/components/tabs/tabs.js + 2 modules
var tabs = __webpack_require__(8372);
// EXTERNAL MODULE: ./src/components/navigation/nav-tab.tsx
var nav_tab = __webpack_require__(1651);
// EXTERNAL MODULE: ./src/components/button/toggle-button.tsx
var toggle_button = __webpack_require__(474);
// EXTERNAL MODULE: ./src/components/table/table.tsx
var table = __webpack_require__(9854);
// EXTERNAL MODULE: ./src/components/table/table-body.tsx
var table_body = __webpack_require__(4645);
// EXTERNAL MODULE: ./src/components/table/table-cell.tsx
var table_cell = __webpack_require__(504);
// EXTERNAL MODULE: ./src/components/table/table-header-cell.tsx
var table_header_cell = __webpack_require__(6955);
// EXTERNAL MODULE: ./src/components/table/table-header-row.tsx
var table_header_row = __webpack_require__(9308);
// EXTERNAL MODULE: ./src/components/table/table-row.tsx
var table_row = __webpack_require__(6321);
;// CONCATENATED MODULE: external "assert"
const external_assert_namespaceObject = require("assert");
var external_assert_default = /*#__PURE__*/__webpack_require__.n(external_assert_namespaceObject);
;// CONCATENATED MODULE: ./src/app/allocations/generate/sups-table.tsx










function is_for_emplacement(sup) {
    return !sup["case_type"].startsWith("No ");
}
function SupsTable({ superviseesInfo, setChhSuperviseesInfo, showSupsType, columnNameKeyMap, supEditType, crsNames, updateSup }) {
    var isToggleEmplacement = supEditType == "toggleEmplacement";
    var isAssignCrs = supEditType == "assignCRS";
    external_assert_default()(!isAssignCrs || crsNames, "Expect CRS names to be passed in as prop if user is expected to be allowed to assign CRS!");
    function toggle_is_for_emplacement(sup) {
        if (isToggleEmplacement) {
            return function(_) {
                if (sup["case_type"].startsWith("No ")) {
                    var updated_case_type = sup["case_type"].substring(3);
                } else {
                    var updated_case_type = `No ${sup["case_type"]}`;
                }
                sup["case_type"] = updated_case_type;
                //Find index of sup    
                var supIndex = superviseesInfo.findIndex((maybeSup)=>maybeSup.name == sup.name);
                // Create new sup array
                const updatedSups = [
                    // Items before the insertion point:
                    ...superviseesInfo.slice(0, supIndex),
                    // New item:
                    sup,
                    // Items after the insertion point:
                    ...superviseesInfo.slice(supIndex + 1)
                ];
                setChhSuperviseesInfo(updatedSups);
            };
        }
        return function(_) {};
    }
    function setAssignedCrs(sup) {
        if (isAssignCrs) {
            external_assert_default()(updateSup);
            return function(newCrs) {
                var oldCrs = sup["crs_name"];
                sup["crs_name"] = newCrs;
                updateSup(sup, oldCrs);
            };
        }
        return function(_) {};
    }
    function chhSuperviseesFilter(sup) {
        // If there is option to adjust whether supervisee should be emplaced, show all supervisees
        // Otherwise, show only supervisees who are being emplaced and filter out those who are not
        var showNoAssignSup = isToggleEmplacement || !sup["case_type"].includes("No");
        switch(showSupsType){
            case "all":
                return showNoAssignSup;
            case "leaving":
                return sup["case_type"].includes("Leaving") && showNoAssignSup;
            case "new":
                return sup["case_type"].includes("New") && showNoAssignSup;
            case "penal/black":
                return sup["cat"] != "DRC" || sup["iph_rating"] == "Black";
        }
    }
    var numOfSups = superviseesInfo.filter((sup)=>{
        return chhSuperviseesFilter(sup) && is_for_emplacement(sup);
    }).length;
    var numOfSupsMessage = showSupsType == "all" ? "Total number of supervisees" : showSupsType == "leaving" ? "Number of reassignments" : "Number of new cases";
    function rowColour(sup) {
        return sup["crs_name"] || !isAssignCrs ? "hover:bg-gray-50" : "bg-red-200 text-red-700 hover:bg-red-100";
    }
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "text-center py-4 bg-yellow-400 font-semibold text-base",
                children: `${numOfSupsMessage} for emplacement: ${numOfSups}`
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(table/* default */.Z, {
                children: [
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)(table_header_row/* default */.Z, {
                        children: [
                            isToggleEmplacement ? /*#__PURE__*/ jsx_runtime_.jsx(table_header_cell/* default */.Z, {
                                content: "To Emplace?"
                            }, "to_emplace") : /*#__PURE__*/ jsx_runtime_.jsx(jsx_runtime_.Fragment, {}),
                            Array.from(columnNameKeyMap.keys()).map((key)=>/*#__PURE__*/ jsx_runtime_.jsx(table_header_cell/* default */.Z, {
                                    content: columnNameKeyMap.getValue(key)
                                }, key)),
                            isAssignCrs ? /*#__PURE__*/ jsx_runtime_.jsx(table_header_cell/* default */.Z, {
                                content: "CRS Name"
                            }, "crs_name") : /*#__PURE__*/ jsx_runtime_.jsx(jsx_runtime_.Fragment, {})
                        ]
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx(table_body/* default */.Z, {
                        children: superviseesInfo.filter((sup)=>{
                            return chhSuperviseesFilter(sup);
                        }).map((sup)=>/*#__PURE__*/ (0,jsx_runtime_.jsxs)(table_row/* default */.Z, {
                                className: rowColour(sup),
                                children: [
                                    isToggleEmplacement ? /*#__PURE__*/ jsx_runtime_.jsx(table_cell/* default */.Z, {
                                        content: /*#__PURE__*/ jsx_runtime_.jsx(toggle_button/* default */.Z, {
                                            enabled: is_for_emplacement(sup),
                                            setEnabled: toggle_is_for_emplacement(sup)
                                        }, "to_emplace_toggle" + sup.name)
                                    }, "to_emplace" + sup.name) : /*#__PURE__*/ jsx_runtime_.jsx(jsx_runtime_.Fragment, {}),
                                    Array.from(columnNameKeyMap.keys()).map((key)=>/*#__PURE__*/ jsx_runtime_.jsx(table_cell/* default */.Z, {
                                            content: String(sup[key])
                                        }, key + sup.name)),
                                    isAssignCrs ? /*#__PURE__*/ jsx_runtime_.jsx(table_cell/* default */.Z, {
                                        content: /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                            className: "flex flex-col flex-nowrap relative w-auto gap-1 h-full",
                                            children: /*#__PURE__*/ jsx_runtime_.jsx(form_dropdown_input/* default */.Z, {
                                                options: crsNames,
                                                selectedOption: sup.crs_name,
                                                setSelectedOption: setAssignedCrs(sup)
                                            })
                                        })
                                    }, "crs_name" + sup.name) : /*#__PURE__*/ jsx_runtime_.jsx(jsx_runtime_.Fragment, {})
                                ]
                            }, sup.name))
                    })
                ]
            })
        ]
    });
}

;// CONCATENATED MODULE: ./src/app/allocations/generate/crs-table.tsx







function crsFilter(crs, showCrsType) {
    switch(showCrsType){
        case "all":
            return true;
        case "leaving":
            return crs["is_leaving"];
        case "on hiatus":
            return crs["no_new_cases"];
        case "taking new cases":
            return !crs["no_new_cases"] && !crs["is_leaving"];
    }
}
function CrsTable({ crsInfo, showCrsType, columnNameKeyMap }) {
    function getNumOfCrsMessage() {
        switch(showCrsType){
            case "all":
                return "All";
            case "leaving":
                return "Leaving";
            case "on hiatus":
                return "Not taking new cases this month";
        }
    }
    var totalNumOfCrs = crsInfo.filter((crs)=>{
        return !crs["is_leaving"] && !crs["no_new_cases"];
    }).length;
    var numOfCrs = crsInfo.filter((crs)=>{
        return crsFilter(crs, showCrsType);
    }).length;
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "text-center py-4 bg-yellow-400 font-semibold text-base",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("p", {
                        children: `Total number of caseworkers taking new cases this month: ${totalNumOfCrs}\n`
                    }),
                    showCrsType != "taking new cases" && /*#__PURE__*/ jsx_runtime_.jsx("p", {
                        className: "font-normal",
                        children: `${getNumOfCrsMessage()}: ${numOfCrs}`
                    }),
                    showCrsType != "taking new cases" && /*#__PURE__*/ jsx_runtime_.jsx("p", {
                        className: "font-normal italic px-4",
                        children: "To add or remove caseworkers, or change leaving / hiatus status, please restart."
                    })
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(table/* default */.Z, {
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx(table_header_row/* default */.Z, {
                        children: Array.from(columnNameKeyMap.keys()).map((key)=>/*#__PURE__*/ jsx_runtime_.jsx(table_header_cell/* default */.Z, {
                                content: columnNameKeyMap.getValue(key)
                            }, key))
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx(table_body/* default */.Z, {
                        children: crsInfo.filter((crs)=>{
                            return crsFilter(crs, showCrsType);
                        }).map((crs)=>/*#__PURE__*/ jsx_runtime_.jsx(table_row/* default */.Z, {
                                children: Array.from(columnNameKeyMap.keys()).map((key)=>/*#__PURE__*/ jsx_runtime_.jsx(table_cell/* default */.Z, {
                                        content: crs[key].toString()
                                    }, key + crs.crs_name))
                            }, crs.crs_name))
                    })
                ]
            })
        ]
    });
}

;// CONCATENATED MODULE: ./src/app/allocations/generate/card-three.tsx
/* __next_internal_client_entry_do_not_use__ default auto */ 







function CardThree({ isCardSelected, goToNextCard, goToPreviousCard, crsProcessedInfo, chhSuperviseesInfo, setChhSuperviseesInfo }) {
    const [showSupsType, setShowSupsType] = (0,react_.useState)("all");
    function onToggleSupsTypeTab(index) {
        switch(index){
            case 0:
                setShowSupsType("all");
                break;
            case 1:
                setShowSupsType("penal/black");
                break;
            case 2:
                setShowSupsType("leaving");
                break;
        }
    }
    function selectedSupsTypeTabIndex() {
        switch(showSupsType){
            case "all":
                return 0;
            case "penal/black":
                return 1;
            case "leaving":
                return 2;
        }
    }
    const [showCrsType, setShowCrsType] = (0,react_.useState)("all");
    function onToggleCrsTypeTab(index) {
        switch(index){
            case 0:
                setShowCrsType("all");
                break;
            case 1:
                setShowCrsType("on hiatus");
                break;
            case 2:
                setShowCrsType("leaving");
                break;
        }
    }
    function selectedCrsTypeTabIndex() {
        switch(showCrsType){
            case "all":
                return 0;
            case "on hiatus":
                return 1;
            case "leaving":
                return 2;
        }
    }
    return /*#__PURE__*/ jsx_runtime_.jsx(card_modal/* default */.Z, {
        isCardSelected: isCardSelected,
        goToNextCard: goToNextCard,
        goToPreviousCard: goToPreviousCard,
        title: "Check emplacement data",
        children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)(tabs/* Tab */.O.Group, {
            children: [
                /*#__PURE__*/ jsx_runtime_.jsx(nav_tab/* NavigationTab */.u, {
                    tabTitles: [
                        "Supervisees",
                        "Caseworkers"
                    ]
                }),
                "=",
                /*#__PURE__*/ (0,jsx_runtime_.jsxs)(tabs/* Tab */.O.Panels, {
                    className: "max-w-full max-h-full",
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)(tabs/* Tab */.O.Panel, {
                            children: [
                                /*#__PURE__*/ jsx_runtime_.jsx(tabs/* Tab */.O.Group, {
                                    onChange: onToggleSupsTypeTab,
                                    selectedIndex: selectedSupsTypeTabIndex(),
                                    children: /*#__PURE__*/ jsx_runtime_.jsx(nav_tab/* NavigationTab */.u, {
                                        tabTitles: [
                                            "All",
                                            "Penal or black cases",
                                            "Leaving caseworkers' cases"
                                        ]
                                    })
                                }),
                                /*#__PURE__*/ jsx_runtime_.jsx(SupsTable, {
                                    superviseesInfo: chhSuperviseesInfo,
                                    setChhSuperviseesInfo: setChhSuperviseesInfo,
                                    columnNameKeyMap: InterimSupsColumnNameToKey,
                                    showSupsType: showSupsType,
                                    supEditType: "toggleEmplacement"
                                })
                            ]
                        }, "Supervisees"),
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)(tabs/* Tab */.O.Panel, {
                            children: [
                                /*#__PURE__*/ jsx_runtime_.jsx(tabs/* Tab */.O.Group, {
                                    onChange: onToggleCrsTypeTab,
                                    selectedIndex: selectedCrsTypeTabIndex(),
                                    children: /*#__PURE__*/ jsx_runtime_.jsx(nav_tab/* NavigationTab */.u, {
                                        tabTitles: [
                                            "All",
                                            "On hiatus",
                                            "Leaving caseworkers"
                                        ]
                                    })
                                }),
                                /*#__PURE__*/ jsx_runtime_.jsx(CrsTable, {
                                    crsInfo: crsProcessedInfo,
                                    showCrsType: showCrsType,
                                    columnNameKeyMap: InterimCrsColumnNameToKey
                                })
                            ]
                        }, "Crs")
                    ]
                }),
                "="
            ]
        })
    });
}

// EXTERNAL MODULE: ./src/components/button/button-colour-interface.tsx
var button_colour_interface = __webpack_require__(5956);
;// CONCATENATED MODULE: ./src/components/button/download-button.tsx


function DownloadButton({ onClick, text, colour, isActive }) {
    var colourCSS = button_colour_interface/* ButtonColourToCSS */.m[colour];
    var inactiveCSS = isActive != undefined && !isActive ? "opacity-25 pointer-events-none" : "";
    function handleOnClick() {
        if (isActive != undefined && !isActive) {
            return;
        }
        onClick();
    }
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("button", {
        type: "button",
        onClick: handleOnClick,
        className: `${colourCSS} ${inactiveCSS} flex flex-row rounded-md justify-between gap-2 items-center px-3 py-2 text-sm font-semibold focus:outline-none focus-visible:ring-2`,
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx("svg", {
                className: "w-6 h-6",
                xmlns: "http://www.w3.org/2000/svg",
                fill: "none",
                viewBox: "0 0 24 24",
                children: /*#__PURE__*/ jsx_runtime_.jsx("path", {
                    stroke: "currentColor",
                    strokeLinecap: "round",
                    strokeLinejoin: "round",
                    strokeWidth: "2",
                    d: "M8 1v11m0 0 4-4m-4 4L4 8m11 4v3a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-3"
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "absolute invisible lg:visible lg:relative",
                children: text
            })
        ]
    });
}

;// CONCATENATED MODULE: ./src/app/allocations/generate/card-four.tsx
/* __next_internal_client_entry_do_not_use__ default auto */ 








function CardFour({ isCardSelected, goToNextCard, goToPreviousCard, showSpinner, crsEmplacementResult, chhSupEmplacementResult, setChhSupEmplacementResult, updateSup, downloadResults }) {
    var crsForEmplacementNames = crsEmplacementResult.filter((crs)=>{
        return crsFilter(crs, "taking new cases");
    }).map((crs)=>crs["crs_name"]);
    const [showSupsType, setShowSupsType] = (0,react_.useState)("all");
    function onToggleSupsTypeTab(index) {
        switch(index){
            case 0:
                setShowSupsType("all");
                break;
            case 1:
                setShowSupsType("penal/black");
                break;
            case 2:
                setShowSupsType("leaving");
                break;
        }
    }
    function selectedSupsTypeTabIndex() {
        switch(showSupsType){
            case "all":
                return 0;
            case "penal/black":
                return 1;
            case "leaving":
                return 2;
        }
    }
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(card_modal/* default */.Z, {
        isCardSelected: isCardSelected,
        goToNextCard: goToNextCard,
        goToPreviousCard: goToPreviousCard,
        title: "Emplacement result",
        showSpinner: showSpinner,
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "py-2",
                children: /*#__PURE__*/ jsx_runtime_.jsx(DownloadButton, {
                    onClick: downloadResults,
                    text: "Download",
                    colour: "yellow"
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "container max-w-full y-screen",
                children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)(tabs/* Tab */.O.Group, {
                    children: [
                        /*#__PURE__*/ jsx_runtime_.jsx(nav_tab/* NavigationTab */.u, {
                            tabTitles: [
                                "Supervisees",
                                "Caseworkers"
                            ]
                        }),
                        /*#__PURE__*/ jsx_runtime_.jsx("div", {
                            className: "w-full overflow-x-scroll max-h-screen",
                            children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)(tabs/* Tab */.O.Panels, {
                                children: [
                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)(tabs/* Tab */.O.Panel, {
                                        children: [
                                            /*#__PURE__*/ jsx_runtime_.jsx(tabs/* Tab */.O.Group, {
                                                onChange: onToggleSupsTypeTab,
                                                selectedIndex: selectedSupsTypeTabIndex(),
                                                children: /*#__PURE__*/ jsx_runtime_.jsx(nav_tab/* NavigationTab */.u, {
                                                    tabTitles: [
                                                        "All",
                                                        "Penal or black cases",
                                                        "Leaving caseworkers' cases"
                                                    ]
                                                })
                                            }),
                                            /*#__PURE__*/ jsx_runtime_.jsx(SupsTable, {
                                                superviseesInfo: chhSupEmplacementResult,
                                                setChhSuperviseesInfo: setChhSupEmplacementResult,
                                                showSupsType: showSupsType,
                                                columnNameKeyMap: SupsResultsColumnNameToKey,
                                                supEditType: "assignCRS",
                                                crsNames: crsForEmplacementNames,
                                                updateSup: updateSup
                                            })
                                        ]
                                    }, "Supervisees"),
                                    /*#__PURE__*/ jsx_runtime_.jsx(tabs/* Tab */.O.Panel, {
                                        children: /*#__PURE__*/ jsx_runtime_.jsx(CrsTable, {
                                            crsInfo: crsEmplacementResult,
                                            showCrsType: "taking new cases",
                                            columnNameKeyMap: CrsResultsColumnNameToKey
                                        })
                                    }, "Crs")
                                ]
                            })
                        })
                    ]
                })
            })
        ]
    });
}

// EXTERNAL MODULE: ./src/components/modal/pop-up-modal.tsx
var pop_up_modal = __webpack_require__(8362);
;// CONCATENATED MODULE: ./src/app/allocations/generate/page.tsx
/* __next_internal_client_entry_do_not_use__ default auto */ 









function ViewAllAllocations() {
    const [error, setError] = (0,react_.useState)("");
    const [selectedCard, setSelectedCard] = (0,react_.useState)(1);
    const [showSpinner, setShowSpinner] = (0,react_.useState)(true);
    // Card one attributes
    const currentMonth = (new Date().getMonth() + 3) % 12 // Emplacement is usually three months in advance
    ;
    const currentYear = new Date().getFullYear() + (currentMonth > new Date().getMonth() ? 0 : 1 // Emplacement year may be next year
    );
    const [selectedMonth, setSelectedMonth] = (0,react_.useState)(Months[currentMonth]);
    const [selectedYear, setSelectedYear] = (0,react_.useState)(currentYear);
    const [leavingCrs, setLeavingCrs] = (0,react_.useState)([]);
    const [noNewCaseCrs, setNoNewCaseCrs] = (0,react_.useState)([]);
    const [allCrsNames, initAllCrsNames] = (0,react_.useState)([]);
    (0,react_.useEffect)(()=>{
        // All /database/* requests will be redirected to flask server
        fetch("/database/get_active_crs_names").then((res)=>res.json().then((data)=>{
                // Setting a data from api
                initAllCrsNames(data);
                setShowSpinner(false);
            }));
    }, []);
    function cardOneGoToNext() {
        setSelectedCard(2);
    }
    // Card two attributes
    const [crsDatabase, setCrsDatabase] = (0,react_.useState)([]);
    const [emplacementList, setEmplacementList] = (0,react_.useState)([]);
    function cardTwoGoToNext() {
        setShowSpinner(true);
        var all_crs_info = allCrsNames.map((name)=>{
            return {
                crs_name: name,
                is_leaving: leavingCrs.includes(name),
                no_new_cases: noNewCaseCrs.includes(name)
            };
        });
        fetch("/database/filter_supervisees", {
            method: "POST",
            mode: "cors",
            body: JSON.stringify({
                month: MonthToInt(selectedMonth),
                year: selectedYear,
                crs_info: all_crs_info,
                crs_database: crsDatabase,
                emplacement_list: emplacementList
            }),
            headers: {
                "Content-type": "application/json; charset=UTF-8"
            }
        }).then((res)=>{
            res.json().then((data)=>{
                setSelectedCard(3);
                setCrsProcessedInfo(JSON.parse(data["crs"]));
                setChhSuperviseesInfo(JSON.parse(data["sups"]));
            }).catch(()=>{
                setError(`${res.status}: ${res.statusText}`);
            });
        }).catch((error)=>{
            setError(error.message);
        }).finally(()=>{
            setShowSpinner(false);
        });
    }
    // Card three attributes
    const [crsProcessedInfo, setCrsProcessedInfo] = (0,react_.useState)([]);
    const [chhSuperviseesInfo, setChhSuperviseesInfo] = (0,react_.useState)([]);
    function cardThreeGoToNext() {
        setShowSpinner(true);
        setSelectedCard(4);
        var update_sups = {
            month: MonthToInt(selectedMonth),
            year: selectedYear,
            crs_info: crsProcessedInfo,
            chh_supervisees_info: chhSuperviseesInfo
        };
        fetch("/database/emplace_chh_supervisees", {
            method: "POST",
            mode: "cors",
            body: JSON.stringify(update_sups),
            headers: {
                "Content-type": "application/json; charset=UTF-8"
            }
        }).then((res)=>{
            res.json().then((data)=>{
                setCrsEmplacementResult(JSON.parse(data["crs"]));
                setChhSupEmplacementResult(JSON.parse(data["sups"]));
            }).catch(()=>{
                setError(`${res.status}: ${res.statusText}`);
            });
        }).catch((error)=>{
            setError(error.message);
        }).finally(()=>{
            setShowSpinner(false);
        });
    }
    // Card four attributes
    const [crsEmplacementResult, setCrsEmplacementResult] = (0,react_.useState)([]);
    const [chhSupEmplacementResult, setChhSupEmplacementResult] = (0,react_.useState)([]);
    function updateSupAssignment(targetSup, oldCrsName) {
        var oldCrsUpdated = crsEmplacementResult.find((maybeCrs)=>maybeCrs.crs_name == oldCrsName);
        if (oldCrsUpdated) {
            oldCrsUpdated.num_new_cases = (parseInt(oldCrsUpdated.num_new_cases) - 1).toString();
            oldCrsUpdated.new_caseload = (parseInt(oldCrsUpdated.new_caseload) - 1).toString();
            setCrsEmplacementResult([
                ...crsEmplacementResult.filter((maybeCrs)=>{
                    return maybeCrs.crs_name != oldCrsName;
                }),
                oldCrsUpdated
            ].sort((a, b)=>{
                return a.crs_name.localeCompare(b.crs_name);
            }));
        }
        var newCrsUpdated = crsEmplacementResult.find((maybeCrs)=>maybeCrs.crs_name == targetSup.crs_name);
        if (newCrsUpdated) {
            newCrsUpdated.num_new_cases = (parseInt(newCrsUpdated.num_new_cases) + 1).toString();
            newCrsUpdated.new_caseload = (parseInt(newCrsUpdated.new_caseload) + 1).toString();
            setCrsEmplacementResult([
                ...crsEmplacementResult.filter((maybeCrs)=>{
                    return maybeCrs.crs_name != targetSup.crs_name;
                }),
                newCrsUpdated
            ].sort((a, b)=>{
                return a.crs_name.localeCompare(b.crs_name);
            }));
        }
        setChhSupEmplacementResult([
            ...chhSupEmplacementResult.filter((maybeSup)=>{
                return maybeSup.name != targetSup.name;
            }),
            targetSup
        ].sort((a, b)=>{
            return a.name.localeCompare(b.name);
        }));
    }
    function downloadResults() {
        var chhSupsResultsHeaders = CrsDatabaseColumnNameToKey.getKeyList();
        var chhSupDownload = chhSupEmplacementResult.map((sup)=>{
            delete sup.crs_last_updated_month;
            delete sup.crs_last_updated_year;
            for(var test in sup){
                sup[CrsDatabaseColumnNameToKey.getIndexOfValue(test)] = sup[test];
                delete sup[test];
            }
            return sup;
        });
        var workbook = xlsx.utils.book_new();
        xlsx.utils.sheet_add_aoa(workbook, [
            chhSupsResultsHeaders
        ]);
        var supsWorksheet = xlsx.utils.sheet_add_json(workbook, chhSupDownload, {
            origin: "A2",
            skipHeader: true
        });
        xlsx.utils.book_append_sheet(workbook, supsWorksheet, "Supervisees");
        var crsWorksheet = xlsx.utils.json_to_sheet(crsEmplacementResult.map((crs)=>{
            delete crs.month;
            delete crs.year;
            return crs;
        }));
        xlsx.utils.book_append_sheet(workbook, crsWorksheet, "CRS");
        xlsx.writeFile(workbook, `${selectedMonth}${selectedYear}.xlsx`);
    }
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx(CardOne, {
                isCardSelected: selectedCard === 1,
                goToNextCard: cardOneGoToNext,
                selectedMonth: selectedMonth,
                setSelectedMonth: setSelectedMonth,
                selectedYear: selectedYear,
                setSelectedYear: setSelectedYear,
                allCrsNames: allCrsNames,
                leavingCrs: leavingCrs,
                setLeavingCrs: setLeavingCrs,
                noNewCaseCrs: noNewCaseCrs,
                setNoNewCaseCrs: setNoNewCaseCrs,
                showSpinner: showSpinner
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(CardTwo, {
                isCardSelected: selectedCard === 2,
                goToPreviousCard: ()=>{
                    setSelectedCard(1);
                },
                goToNextCard: cardTwoGoToNext,
                setCrsDatabase: setCrsDatabase,
                setEmplacementList: setEmplacementList,
                showSpinner: showSpinner
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(CardThree, {
                isCardSelected: selectedCard === 3,
                goToPreviousCard: ()=>{
                    setSelectedCard(2);
                },
                goToNextCard: cardThreeGoToNext,
                crsProcessedInfo: crsProcessedInfo,
                chhSuperviseesInfo: chhSuperviseesInfo,
                setChhSuperviseesInfo: setChhSuperviseesInfo,
                showSpinner: showSpinner
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(CardFour, {
                isCardSelected: selectedCard === 4,
                goToPreviousCard: ()=>{
                    setSelectedCard(3);
                },
                crsEmplacementResult: crsEmplacementResult,
                chhSupEmplacementResult: chhSupEmplacementResult,
                setChhSupEmplacementResult: setChhSupEmplacementResult,
                updateSup: updateSupAssignment,
                downloadResults: downloadResults,
                showSpinner: showSpinner
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(pop_up_modal/* default */.Z, {
                isOpen: error != "",
                closeModal: ()=>{
                    setError("");
                },
                title: "There was a problem with the files",
                children: error
            })
        ]
    });
}


/***/ }),

/***/ 1864:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $$typeof: () => (/* binding */ $$typeof),
/* harmony export */   __esModule: () => (/* binding */ __esModule),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1313);

const proxy = (0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`C:\Users\Lydia\Documents\Optimisation\chh\CRSGUI - Generic\frontend\src\app\allocations\generate\page.tsx`)

// Accessing the __esModule property and exporting $$typeof are required here.
// The __esModule getter forces the proxy target to create the default export
// and the $$typeof value is for rendering logic to determine if the module
// is a client boundary.
const { __esModule, $$typeof } = proxy;
const __default__ = proxy.default;


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__default__);

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, [381,239,662,855,372,67,726,486,690,833,846], () => (__webpack_exec__(9186)));
module.exports = __webpack_exports__;

})();